<!doctype html><html class="theme-next pisces use-motion"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="//fonts.useso.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css"><link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css"><meta name="keywords" content="Hexo优化,"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1"><meta name="description" content="blog框架:hexo主题框架: NexT

1. SEO 优化title优化更改index.swig文件

文件路径是\themes\next\layou

{% block title %} 
  	{{ config.title }} 
	{% endblock %}
改成:
{% block title %} 
  		{{ config.title }} - {{ theme.desc"><meta property="og:type" content="article"><meta property="og:title" content="Blog优化日志"><meta property="og:url" content="http://yoursite.com/2016/05/24/Blog优化志.html"><meta property="og:site_name" content="ilioner"><meta property="og:description" content="blog框架:hexo主题框架: NexT

1. SEO 优化title优化更改index.swig文件

文件路径是\themes\next\layou

{% block title %} 
  	{{ config.title }} 
	{% endblock %}
改成:
{% block title %} 
  		{{ config.title }} - {{ theme.desc"><meta property="og:updated_time" content="2016-05-24T07:51:03.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Blog优化日志"><meta name="twitter:description" content="blog框架:hexo主题框架: NexT

1. SEO 优化title优化更改index.swig文件

文件路径是\themes\next\layou

{% block title %} 
  	{{ config.title }} 
	{% endblock %}
改成:
{% block title %} 
  		{{ config.title }} - {{ theme.desc"><script type="text/javascript" id="hexo.configuration">var NexT=window.NexT||{},CONFIG={scheme:"Pisces",sidebar:{position:"left",display:"hide"},fancybox:!0,motion:!0,duoshuo:{userId:0,author:"博主"}}</script><title> Blog优化日志 | ilioner</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container one-collumn sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">ilioner</span><span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">为什么坚持，想想当初</p></div><div class="site-nav-toggle"> <button><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br> 首页</a></li><li class="menu-item menu-item-archives"><a href="/archives" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br> 归档</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br> 标签</a></li><li class="menu-item menu-item-search"><a href="#" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br> 搜索</a></li></ul><div class="site-search"><div class="popup"><span class="search-icon fa fa-search"></span> <input type="text" id="local-search-input"><div id="local-search-result"></div> <span class="popup-btn-close">close</span></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><header class="post-header"><h1 class="post-title" itemprop="name headline"> Blog优化日志</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time itemprop="dateCreated" datetime="2016-05-24T11:48:13+08:00" content="2016-05-24">2016-05-24</time></span> <span class="post-comments-count">&nbsp; | &nbsp;<a href="/2016/05/24/Blog优化志.html#comments" itemprop="discussionUrl"><span class="post-comments-count ds-thread-count" data-thread-key="2016/05/24/Blog优化志.html" itemprop="commentsCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><blockquote><p>blog框架:hexo<br>主题框架: NexT</p></blockquote><h2 id="1-SEO-优化"><a href="#1-SEO-优化" class="headerlink" title="1. SEO 优化"></a>1. SEO 优化</h2><h4 id="title优化"><a href="#title优化" class="headerlink" title="title优化"></a>title优化</h4><p><strong>更改index.swig文件</strong></p><blockquote><p>文件路径是\themes\next\layou</p></blockquote><pre><code>{% block title %} 
  	{{ config.title }} 
	{% endblock %}
</code></pre><p>改成:</p><pre><code>{% block title %} 
  		{{ config.title }} - {{ theme.description }} 
	{% endblock %}
</code></pre><h4 id="添加sitemap"><a href="#添加sitemap" class="headerlink" title="添加sitemap"></a>添加sitemap</h4><p>添加sitemap便于搜索引擎可以更加友好的抓取博客内容:</p><ul><li><p>在博客根目录下运行:</p><p> npm install hexo-generator-sitemap –save<br> npm install hexo-generator-baidu-sitemap –save</p></li><li><p>配置_config.yml</p><pre><code>#hexo sitemap网站地图
sitemap:
path: sitemap.xml
</code></pre></li></ul><blockquote><p>看到有些网站说在配置_config.yml时也要添加</p><pre><code>  baidusitemap:
path: baidusitemap.xml
</code></pre><p>表示添加后直接编译不过，不用添加其实也可以生成baidusitemap.xml</p></blockquote><h4 id="添加robots-txt"><a href="#添加robots-txt" class="headerlink" title="添加robots.txt"></a>添加robots.txt</h4><p>将该文件添加至source文件夹下</p><pre><code>User-agent: *
Allow: /
Allow: /archives/
Allow: /categories/
Allow: /about/

Disallow: /vendors/
Disallow: /js/
Disallow: /css/
Disallow: /fonts/
Disallow: /vendors/
Disallow: /fancybox/

Sitemap: http://{域名}/sitemap.xml
Sitemap: http://{域名}/baidusitemap.xml
</code></pre><p>Allow:允许抓取</p><p>Disallow:不允许抓取</p><h2 id="2-字体优化"><a href="#2-字体优化" class="headerlink" title="2. 字体优化"></a>2. 字体优化</h2><h4 id="三种方式"><a href="#三种方式" class="headerlink" title="三种方式:"></a>三种方式:</h4><ol><li><p>直接在主题配置文件里面禁用font:</p><pre><code>font:
      enable: true
</code></pre></li><li><p>修改font的host,因为默认是googleapis所以国内访问巨慢:</p><pre><code>font:
      enable: true

      # Uri of fonts host. E.g. //fonts.googleapis.com (Default)
      host: fonts.useso.com
</code></pre></li><li><p>NexT主题的话如果不嫌麻烦还可以直接:</p><p>themes&gt;next&gt;layout&gt;_partials&gt;head&gt;external-fonts.swig</p></li></ol><pre><code>{% if font_families !== '' %}
	 
    	{% set font_families += '&subset=latin,latin-ext' %}
    	{% set font_host = font_config.host | default('//fonts.useso.com') %}
    	<link href="{{ font_host }}/css?family={{ font_families }}" rel="stylesheet" type="text/css">
    	{% endif %}
</code></pre><h2 id="3-资源文件压缩"><a href="#3-资源文件压缩" class="headerlink" title="3. 资源文件压缩"></a>3. 资源文件压缩</h2><h5 id="使用gulp"><a href="#使用gulp" class="headerlink" title="使用gulp"></a>使用gulp</h5><ul><li><p>添加 gulpfile.js 至与_config.yml同目录的地方,写内容的时候注意一下目录是否与本网站一致</p><pre><code>var gulp = require(&apos;gulp&apos;);
var minifycss = require(&apos;gulp-minify-css&apos;);
var uglify = require(&apos;gulp-uglify&apos;);
var minifyHTML = require(&quot;gulp-minify-html&quot;);
var htmlclean = require(&apos;gulp-htmlclean&apos;);
var gutil = require(&apos;gulp-util&apos;);
var minifyInline = require(&apos;gulp-minify-inline&apos;);
var inline = require(&apos;gulp-inline&apos;)
var inlineimage = require(&apos;gulp-inline-image&apos;);
</code></pre></li></ul><pre><code>// 获取 gulp-imagemin 模块
var imagemin = require(&apos;gulp-imagemin&apos;);

var dir = &apos;./public&apos;


// 压缩 public 目录 html
gulp.task(&apos;minify-html&apos;,function() {
  var opts = {
         removeComments: true,
         minifyJS: true,
         minifyCSS: true,
         minifyURLs: true,
  };
  gulp.src(&apos;./public/**/*.html&apos;)
    .pipe(inline({
        base: &apos;./public/&apos;,
        disabledTypes: [&apos;svg&apos;, &apos;img&apos;], // Only inline css files
    }))
    .pipe(minifyInline())
    .pipe(minifyHTML(opts))
    .pipe(gulp.dest(dir));
});

// 压缩 public 目录 css
gulp.task(&apos;minify-css&apos;, function() {
    gulp.src(&apos;./public/**/*.css&apos;)
        .pipe(inlineimage())
        .pipe(minifycss())
        .pipe(gulp.dest(dir));
});

// 压缩 public/js 目录 js
gulp.task(&apos;minify-js&apos;, function() {
    gulp.src(&apos;./public/**/*.js&apos;)
        .pipe(uglify().on(&apos;error&apos;, function(e){
            console.log(e);
        }))
        .pipe(gulp.dest(dir));
});


// 压缩图片任务
// 在命令行输入 gulp images 启动此任务
gulp.task(&apos;images-photos&apos;, function () {
    // 1. 找到图片
    gulp.src(&apos;./photos/*.*&apos;)
    // 2. 压缩图片
        .pipe(imagemin({
            progressive: true
        }))
    // 3. 另存图片
        .pipe(gulp.dest(&apos;dist/images&apos;))
});


// 压缩图片任务
// 在命令行输入 gulp images 启动此任务
gulp.task(&apos;images-public&apos;, function () {
    // 1. 找到图片
    gulp.src(&apos;./public/**/*.*&apos;)
    // 2. 压缩图片
        .pipe(imagemin({
            progressive: true
        }))
    // 3. 另存图片
        .pipe(gulp.dest(dir))
});


// 执行 gulp 命令时执行的任务
gulp.task(&apos;default&apos;, [
    &apos;minify-css&apos;,&apos;minify-js&apos;,&apos;minify-html&apos;,
    &apos;images-photos&apos;,&apos;images-public&apos;]
    );
</code></pre><ul><li><p>修改package.json添加依赖包:</p><pre><code>&quot;gulp&quot;: &quot;^3.9.1&quot;,
&quot;gulp-htmlclean&quot;: &quot;^2.7.6&quot;,
&quot;gulp-htmlmin&quot;: &quot;^1.3.0&quot;,
&quot;gulp-imagemin&quot;: &quot;^2.4.0&quot;,
&quot;gulp-minify-css&quot;: &quot;^1.2.4&quot;,
&quot;gulp-uglify&quot;: &quot;^1.5.3&quot;,
</code></pre></li><li><p>安装工具gulp(全局)</p><pre><code>npm install gulp -g
</code></pre></li><li><p>如何用？</p><p>以前的执行步骤:</p><pre><code>hexo clean
hexo generate
hexo deploy
</code></pre><p> 现在的执行步骤</p><pre><code>hexo clean
hexo generate
gulp
hexo deploy
</code></pre></li></ul><p>–<br><strong>为了每次不重复输入这些命令，制作一个脚本去执行它:</strong></p><p>添加deploy.sh到与_config.yml平级的目录</p><pre><code>#!/bin/bash
hexo clean
hexo generate
gulp
hexo deploy
</code></pre><p>添加完成之后执行如下命令赋予权限:</p><pre><code>chmod +x deploy.sh
</code></pre><p>之后每次发布只需要执行:</p><pre><code>./deploy.sh
</code></pre><p>即可</p><hr><p>以上，完成本次优化。</p><p>参考博文:</p><blockquote><p><a href="http://www.selfrebuild.net/2015/06/24/Github-Hexo-Next%E4%B8%BB%E9%A2%98%E4%B8%AA%E6%80%A7%E5%8C%96%E5%AE%9A%E5%88%B6/" target="_blank" rel="external">Hexo博客优化 - Next主题个性化定制</a></p><p><a href="https://joway.wang/posts/Hexo/2016-05-17-hexo-compress-inline-static.html" target="_blank" rel="external">Hexo折腾记——通过压缩与内联提升访问速度</a></p></blockquote></div><div></div><div><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"><div>坚持原创技术分享，您的支持将鼓励我继续创作！</div> <button id="rewardButton" disable="enable" onclick='var e=document.getElementById("QR");"none"===e.style.display?e.style.display="block":e.style.display="none"'> <span>赏</span></button><div id="QR" style="display:none"><div id="alipay" style="display:inline-block"> <img id="alipay_qr" src="/images/shouqian.jpg" alt="TywinZhang Alipay"><p>支付宝打赏</p></div></div></div></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/Hexo优化/" rel="tag">#Hexo优化</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2016/05/23/当悲剧或失望来袭，要知道你们能扛过任何事.html" rel="next" title="当悲剧或失望来袭，要知道你们能扛过任何事"><i class="fa fa-chevron-left"></i> 当悲剧或失望来袭，要知道你们能扛过任何事</a></div><div class="post-nav-prev post-nav-item"></div></div></footer></article><div class="post-spread"><div class="jiathis_style"><a class="jiathis_button_tsina"></a><a class="jiathis_button_tqq"></a><a class="jiathis_button_weixin"></a><a class="jiathis_button_cqq"></a><a class="jiathis_button_douban"></a><a class="jiathis_button_renren"></a><a class="jiathis_button_qzone"></a><a class="jiathis_button_kaixin001"></a><a class="jiathis_button_copy"></a><a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a><a class="jiathis_counter_style"></a></div><script type="text/javascript">var jiathis_config={hideMore:!1}</script><script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script></div></div></div><div class="comments" id="comments"><div class="ds-thread" data-thread-key="2016/05/24/Blog优化志.html" data-title="Blog优化日志" data-url="http://yoursite.com/2016/05/24/Blog优化志.html"></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap"> 文章目录</li><li class="sidebar-nav-overview" data-target="site-overview"> 站点概览</li></ul><section class="site-overview sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" src="/images/avatar.png" alt="TywinZhang"><p class="site-author-name" itemprop="name">TywinZhang</p><p class="site-description motion-element" itemprop="description">一个狮子座的不将就IT男青年</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/archives"><span class="site-state-item-count">8</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags"><span class="site-state-item-count">8</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/ilioner" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://www.jianshu.com/users/899c84548f92/latest_articles" target="_blank" title="简书"><i class="fa fa-fw fa-globe"></i> 简书</a></span></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-SEO-优化"><span class="nav-number">1.</span> <span class="nav-text">1. SEO 优化</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#title优化"><span class="nav-number">1.0.1.</span> <span class="nav-text">title优化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#添加sitemap"><span class="nav-number">1.0.2.</span> <span class="nav-text">添加sitemap</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#添加robots-txt"><span class="nav-number">1.0.3.</span> <span class="nav-text">添加robots.txt</span></a></li></ol></li></ol><li class="nav-item nav-level-2"><a class="nav-link" href="#2-字体优化"><span class="nav-number">2.</span> <span class="nav-text">2. 字体优化</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#三种方式"><span class="nav-number">2.0.1.</span> <span class="nav-text">三种方式:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-资源文件压缩"><span class="nav-number">3.</span> <span class="nav-text">3. 资源文件压缩</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#使用gulp"><span class="nav-number">3.0.0.1.</span> <span class="nav-text">使用gulp</span></a></li></ol></li></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2016</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">TywinZhang</span></div><div class="powered-by"> 由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动</div><div class="theme-info"> 主题 - <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script><script type="text/javascript">var duoshuoQuery={short_name:"ilioner"};!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.id="duoshuo-script",t.src=("https:"==document.location.protocol?"https:":"http:")+"//static.duoshuo.com/embed.js",t.charset="UTF-8",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)}()</script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="popoverlay">').css("overflow","hidden"),$(".popup").toggle()}var isfetched=!1,search_path="search.xml";0==search_path.length&&(search_path="search.xml");var path="/"+search_path,searchFunc=function(e,t,a){"use strict";$.ajax({url:e,dataType:"xml",async:!0,success:function(e){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var r=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),c=document.getElementById(t),s=document.getElementById(a);c.addEventListener("input",function(){var e=0,t='<ul class="search-result-list">',a=this.value.trim().toLowerCase().split(/[\s\-]+/);s.innerHTML="",this.value.trim().length>1&&r.forEach(function(r){var c=!0,s=r.title.trim().toLowerCase(),n=r.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),o=r.url,i=-1,l=-1,p=-1;if(""!=s&&""!=n&&a.forEach(function(e,t){i=s.indexOf(e),l=n.indexOf(e),0>i&&0>l?c=!1:(0>l&&(l=0),0==t&&(p=l))}),c){e+=1,t+="<li><a href='"+o+"' class='search-result-title'>"+s+"</a>";var h=r.content.trim().replace(/<[^>]+>/g,"");if(p>=0){var u=p-20,d=p+80;0>u&&(u=0),0==u&&(d=50),d>h.length&&(d=h.length);var f=h.substring(u,d);a.forEach(function(e){var t=new RegExp(e,"gi");f=f.replace(t,'<b class="search-keyword">'+e+"</b>")}),t+='<p class="search-result">'+f+"...</p>"}t+="</li>"}}),t+="</ul>",0==e&&(t='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'),""==a&&(t='<div id="no-result"><i class="fa fa-search fa-5x" /></div>'),s.innerHTML=t}),proceedsearch()}})};$(".popup-trigger").mousedown(function(e){e.stopPropagation(),0==isfetched?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(function(e){$(".popup").hide(),$(".popoverlay").remove(),$("body").css("overflow","")}),$(".popup").click(function(e){e.stopPropagation()})</script></body></html>